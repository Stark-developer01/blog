$('input').click(function(e){e.preventDefault();});var Instagram={clientId:'17cd9d230f94496390d6b7271cf83bec',token:'192065.ab103e5.31551eef0a5f48938aa3ec3b2d85515e',images:'',reset:function(){this.images='';$('.pictures').find('img').each(function(){$(this).attr('src',Game.loadingTile);});},getImagesFor:function(keyword){$.getJSON('https://api.instagram.com/v1/tags/'+keyword+'/media/recent?access_token='+this.token+'&callback=?',function(images){var i=0;if(!images.data){$('.pictures').html("<h1>Bugger!</h1><p>It seems I've ran out of API requests.<br />Check back later if you can.");}for(i;i<4;i+=1){$('.picture-'+i).children('img').attr('src',images.data[i].images.low_resolution.url);}});}};var Game={start:function(){Game.letters=[];Game.clearGuess();Instagram.reset();Game.answer=Game.answers[Math.floor(Math.random()*Game.answers.length)];$('.score').html(Game.score);Game.getLetters();Game.putLetters();Instagram.getImagesFor(Game.answer);},listeners:function(){$(document).on('click','.letters li:not(.selected)',function(){Game.input(this);});$(document).on('click','.answer li',function(){Game.remove(this);});$(document).on('click','[type="reset"]',function(){Game.clearGuess();});$(document).on('click','[type="submit"]',function(){Game.checkAnswer();});},input:function(letter){var id=$(letter).data('id'),position=Game.guess.length;Game.guess+=$(letter).text();$(letter).addClass('selected');$('.answer').append('<li data-id="'+id+'" data-pos="'+position+'">'+$(letter).html()+'</li>');},remove:function(letter){var id=$(letter).data('id'),position=$(letter).data('pos');Game.guess=Game.guess.slice(0,position)+Game.guess.slice(position+1,Game.guess.length);$('[data-id="'+id+'"]').removeClass('selected');$(letter).remove();},checkAnswer:function(){if(Game.guess===Game.answer){Game.score+=1;Game.start();}else{Game.clearGuess();}},clearGuess:function(){$('.selected').removeClass('selected');Game.guess='';$('.answer').html('');},getLetters:function(){var letters=Game.answer.split(''),i=0;for(i;i<(12-letters.length);i+=1){Game.letters.push(Game.alphabet[Math.floor(Math.random()*Game.alphabet.length)]);}
Game.letters=Game.letters.concat(letters);Game.shuffle(Game.letters);},putLetters:function(){var list='',i=0;for(i;i<Game.letters.length;i+=1){list+='<li data-id="'+i+'">'+Game.letters[i]+'</li>';}
$('.letters').html(list);},shuffle:function(array){var x,y,z=array.length;for(x,y,z;z;x=parseInt(Math.random()*z),y=array[--z],array[z]=array[x],array[x]=y);return array;},answer:'',guess:'',loadingTile:'http://placehold.it/306x306/ffffff&text=loading',score:0,letters:[],answers:['pizza','bacon','donuts','beer','starwars','coffee','beard','ginger'],alphabet:['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],}
Game.start();Game.listeners();